# line nr: 23
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Pattern(~a, Blank()), Optional(Pattern(~m, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Pattern(~c, Blank()), Optional(Pattern(~n, Blank()))), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~m, ~n), ~x), EqQ(~b*~c + ~a*~d, 0), EqQ(Power(~a, 2) + Power(~b, 2), 0))
  ~a*~c*Power(~f, -1)*Subst(integrate((~A + ~B*~x)*Power(~a + ~b*~x, ~m - 1)*Power(~c + ~d*~x, ~n - 1), ~x), ~x, tan(~e + ~f*~x))
end

# line nr: 29
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), -1), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B), ~x), NeQ(~b*~c - ~a*~d, 0))
  Power(~b, -1)*integrate(Power(~a + ~b*tan(~e + ~f*~x), -1)*Simp((~B*(~b*~c - ~a*~d) + ~A*~b*~d)*tan(~e + ~f*~x) + ~A*~b*~c, ~x), ~x) + ~B*~d*Power(~b, -1)*integrate(tan(~e + ~f*~x), ~x)
end

# line nr: 35
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Pattern(~a, Blank()), Pattern(~m, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B), ~x), NeQ(~b*~c - ~a*~d, 0), LtQ(~m, -1), EqQ(Power(~a, 2) + Power(~b, 2), 0))
  integrate(Power(~a + ~b*tan(~e + ~f*~x), 1 + ~m)*Simp(~A*~b*~c + ~A*~a*~d + ~B*~a*~c + ~B*~b*~d + 2 * ~B*~a*~d*tan(~e + ~f*~x), ~x), ~x)*Power(2 * ~a*~b, -1) + (~a*~c + ~b*~d)*(~B*~a - ~A*~b)*Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(2 * ~f*~m*Power(~a, 2), -1)
end

# line nr: 42
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), Pattern(~m, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B), ~x), NeQ(~b*~c - ~a*~d, 0), LtQ(~m, -1), NeQ(Power(~a, 2) + Power(~b, 2), 0))
  Power(Power(~a, 2) + Power(~b, 2), -1)*integrate(Power(~a + ~b*tan(~e + ~f*~x), 1 + ~m)*Simp(~A*~a*~c + ~A*~b*~d + ~B*~b*~c - (~A*~b*~c - ~A*~a*~d - ~B*~a*~c - ~B*~b*~d)*tan(~e + ~f*~x) - ~B*~a*~d, ~x), ~x) + (~A*~b - ~B*~a)*(~b*~c - ~a*~d)*Power(~a + ~b*tan(~e + ~f*~x), 1 + ~m)*Power(~b*~f*(1 + ~m)*(Power(~a, 2) + Power(~b, 2)), -1)
end

# line nr: 49
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), Optional(Pattern(~m, Blank()))), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~m), ~x), NeQ(~b*~c - ~a*~d, 0), Not(LeQ(~m, -1)))
  ~B*~d*Power(~a + ~b*tan(~e + ~f*~x), 1 + ~m)*Power(~b*~f*(1 + ~m), -1) + integrate(Power(~a + ~b*tan(~e + ~f*~x), ~m)*Simp(~A*~c + (~A*~d + ~B*~c)*tan(~e + ~f*~x) - ~B*~d, ~x), ~x)
end

# line nr: 56
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Pattern(~a, Blank()), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B), ~x), NeQ(~b*~c - ~a*~d, 0), EqQ(Power(~a, 2) + Power(~b, 2), 0), GtQ(~m, 1), LtQ(~n, -1))
  -~a*Power(~d*(1 + ~n)*(~b*~c + ~a*~d), -1)*integrate(Power(~a + ~b*tan(~e + ~f*~x), ~m - 1)*Power(~c + ~d*tan(~e + ~f*~x), 1 + ~n)*Simp((~A*~a*~d*(~m + ~n) - ~B*(~a*~c*(~m - 1) + ~b*~d*(1 + ~n)))*tan(~e + ~f*~x) + ~A*~b*~d*(~m - 2 - ~n) - ~B*(~b*~c*(~m - 1) + ~a*~d*(1 + ~n)), ~x), ~x) - (~B*~c - ~A*~d)*Power(~a, 2)*Power(~a + ~b*tan(~e + ~f*~x), ~m - 1)*Power(~c + ~d*tan(~e + ~f*~x), 1 + ~n)*Power(~d*~f*(1 + ~n)*(~b*~c + ~a*~d), -1)
end

# line nr: 64
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Pattern(~a, Blank()), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~n), ~x), NeQ(~b*~c - ~a*~d, 0), EqQ(Power(~a, 2) + Power(~b, 2), 0), GtQ(~m, 1), Not(LtQ(~n, -1)))
  Power(~d*(~m + ~n), -1)*integrate(Power(~a + ~b*tan(~e + ~f*~x), ~m - 1)*Power(~c + ~d*tan(~e + ~f*~x), ~n)*Simp(~B*(~a*~c*(~m - 1) - ~b*~d*(1 + ~n)) + ~A*~a*~d*(~m + ~n) - (~B*(~m - 1)*(~b*~c - ~a*~d) - ~d*(~m + ~n)*(~A*~b + ~B*~a))*tan(~e + ~f*~x), ~x), ~x) + ~B*~b*Power(~a + ~b*tan(~e + ~f*~x), ~m - 1)*Power(~c + ~d*tan(~e + ~f*~x), 1 + ~n)*Power(~d*~f*(~m + ~n), -1)
end

# line nr: 72
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Pattern(~a, Blank()), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B), ~x), NeQ(~b*~c - ~a*~d, 0), EqQ(Power(~a, 2) + Power(~b, 2), 0), LtQ(~m, 0), GtQ(~n, 0))
  Power(2 * ~m*Power(~a, 2), -1)*integrate(Power(~a + ~b*tan(~e + ~f*~x), 1 + ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n - 1)*Simp(~A*(~a*~c*~m + ~b*~d*~n) - ~B*(~a*~d*~n + ~b*~c*~m) - ~d*(~B*~b*(~m - ~n) - ~A*~a*(~m + ~n))*tan(~e + ~f*~x), ~x), ~x) + (~B*~a - ~A*~b)*Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n)*Power(2 * ~a*~f*~m, -1)
end

# line nr: 80
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Pattern(~a, Blank()), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~n), ~x), NeQ(~b*~c - ~a*~d, 0), EqQ(Power(~a, 2) + Power(~b, 2), 0), LtQ(~m, 0), Not(GtQ(~n, 0)))
  integrate(Power(~a + ~b*tan(~e + ~f*~x), 1 + ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n)*Simp(~B*(~a*~c*~m - ~b*~d*(1 + ~n)) + ~A*(~b*~c*~m - ~a*~d*(1 + ~n + 2 * ~m)) + ~d*(~A*~b - ~B*~a)*(1 + ~m + ~n)*tan(~e + ~f*~x), ~x), ~x)*Power(2 * ~a*~m*(~b*~c - ~a*~d), -1) + (~A*~a + ~B*~b)*Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(~c + ~d*tan(~e + ~f*~x), 1 + ~n)*Power(2 * ~f*~m*(~b*~c - ~a*~d), -1)
end

# line nr: 88
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Pattern(~a, Blank()), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~m), ~x), NeQ(~b*~c - ~a*~d, 0), EqQ(Power(~a, 2) + Power(~b, 2), 0), GtQ(~n, 0))
  Power(~a*(~m + ~n), -1)*integrate(Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n - 1)*Simp((~A*~a*~d*(~m + ~n) - ~B*(~b*~d*~m - ~a*~c*~n))*tan(~e + ~f*~x) + ~A*~a*~c*(~m + ~n) - ~B*(~a*~d*~n + ~b*~c*~m), ~x), ~x) + ~B*Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n)*Power(~f*(~m + ~n), -1)
end

# line nr: 96
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Pattern(~a, Blank()), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~m), ~x), NeQ(~b*~c - ~a*~d, 0), EqQ(Power(~a, 2) + Power(~b, 2), 0), LtQ(~n, -1))
  (~A*~d - ~B*~c)*Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(~c + ~d*tan(~e + ~f*~x), 1 + ~n)*Power(~f*(1 + ~n)*(Power(~c, 2) + Power(~d, 2)), -1) - Power(~a*(1 + ~n)*(Power(~c, 2) + Power(~d, 2)), -1)*integrate(Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(~c + ~d*tan(~e + ~f*~x), 1 + ~n)*Simp(~A*(~b*~d*~m - ~a*~c*(1 + ~n)) - ~B*(~b*~c*~m + ~a*~d*(1 + ~n)) - ~a*(~B*~c - ~A*~d)*(1 + ~m + ~n)*tan(~e + ~f*~x), ~x), ~x)
end

# line nr: 104
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Pattern(~a, Blank()), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~m, ~n), ~x), NeQ(~b*~c - ~a*~d, 0), EqQ(Power(~a, 2) + Power(~b, 2), 0), EqQ(~A*~b + ~B*~a, 0))
  ~B*~b*Power(~f, -1)*Subst(integrate(Power(~a + ~b*~x, ~m - 1)*Power(~c + ~d*~x, ~n), ~x), ~x, tan(~e + ~f*~x))
end

# line nr: 110
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Pattern(~a, Blank()), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), -1), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~m), ~x), NeQ(~b*~c - ~a*~d, 0), EqQ(Power(~a, 2) + Power(~b, 2), 0), NeQ(~A*~b + ~B*~a, 0))
  (~A*~b + ~B*~a)*Power(~b*~c + ~a*~d, -1)*integrate(Power(~a + ~b*tan(~e + ~f*~x), ~m), ~x) - (~B*~c - ~A*~d)*Power(~b*~c + ~a*~d, -1)*integrate((~a - ~b*tan(~e + ~f*~x))*Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(~c + ~d*tan(~e + ~f*~x), -1), ~x)
end

# line nr: 124
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Pattern(~a, Blank()), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~m, ~n), ~x), NeQ(~b*~c - ~a*~d, 0), EqQ(Power(~a, 2) + Power(~b, 2), 0), NeQ(~A*~b + ~B*~a, 0))
  (~A*~b + ~B*~a)*Power(~b, -1)*integrate(Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n), ~x) - ~B*Power(~b, -1)*integrate((~a - ~b*tan(~e + ~f*~x))*Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n), ~x)
end

# line nr: 131
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Pattern(~A, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~m, ~n), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), Not(IntegerQ(~m)), Not(IntegerQ(~n)), Not(IntegersQ(2 * ~m, 2 * ~n)), EqQ(Power(~A, 2) + Power(~B, 2), 0))
  Power(~A, 2)*Power(~f, -1)*Subst(integrate(Power(~a + ~b*~x, ~m)*Power(~c + ~d*~x, ~n)*Power(~A - ~B*~x, -1), ~x), ~x, tan(~e + ~f*~x))
end

# line nr: 138
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~m, ~n), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), Not(IntegerQ(~m)), Not(IntegerQ(~n)), Not(IntegersQ(2 * ~m, 2 * ~n)), NeQ(Power(~A, 2) + Power(~B, 2), 0))
  (~A - ~B*~I)*Power(2, -1)*integrate((1 + ~I*tan(~e + ~f*~x))*Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n), ~x) + (~A + ~B*~I)*Power(2, -1)*integrate((1 - ~I*tan(~e + ~f*~x))*Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n), ~x)
end

# line nr: 146
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), 2)*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), NeQ(Power(~c, 2) + Power(~d, 2), 0), LtQ(~n, -1))
  Power(~d*(Power(~c, 2) + Power(~d, 2)), -1)*integrate(Power(~c + ~d*tan(~e + ~f*~x), 1 + ~n)*Simp(~B*Power(~b*~c - ~a*~d, 2) + ~A*~d*(~c*Power(~a, 2) + 2 * ~a*~b*~d - ~c*Power(~b, 2)) + ~d*(~A*(~d*Power(~b, 2) + 2 * ~a*~b*~c - ~d*Power(~a, 2)) + ~B*(~c*Power(~a, 2) + 2 * ~a*~b*~d - ~c*Power(~b, 2)))*tan(~e + ~f*~x) + ~B*(Power(~c, 2) + Power(~d, 2))*Power(~b, 2)*Power(tan(~e + ~f*~x), 2), ~x), ~x) + (~A*~d - ~B*~c)*Power(~c + ~d*tan(~e + ~f*~x), 1 + ~n)*Power(~b*~c - ~a*~d, 2)*Power(~f*(1 + ~n)*(Power(~c, 2) + Power(~d, 2))*Power(~d, 2), -1)
end

# line nr: 154
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), NeQ(Power(~c, 2) + Power(~d, 2), 0), GtQ(~m, 1), LtQ(~n, -1), Or(IntegerQ(~m), IntegersQ(2 * ~m, 2 * ~n)))
  (~B*~c - ~A*~d)*(~b*~c - ~a*~d)*Power(~a + ~b*tan(~e + ~f*~x), ~m - 1)*Power(~c + ~d*tan(~e + ~f*~x), 1 + ~n)*Power(~d*~f*(1 + ~n)*(Power(~c, 2) + Power(~d, 2)), -1) - Power(~d*(1 + ~n)*(Power(~c, 2) + Power(~d, 2)), -1)*integrate(Power(~a + ~b*tan(~e + ~f*~x), ~m - 2)*Power(~c + ~d*tan(~e + ~f*~x), 1 + ~n)*Simp((~b*~c*(~m - 1) + ~a*~d*(1 + ~n))*(~B*~b*~c - ~d*(~A*~b + ~B*~a)) + ~A*~a*~d*(~b*~d*(~m - 1) - ~a*~c*(1 + ~n)) - ~b*(~d*(~m + ~n)*(~A*~b*~c + ~B*~a*~c - ~A*~a*~d) - ~B*~b*((~m - 1)*Power(~c, 2) - (1 + ~n)*Power(~d, 2)))*Power(tan(~e + ~f*~x), 2) - ~d*(1 + ~n)*((~A*~b + ~B*~a)*(~a*~c + ~b*~d) + (~A*~a - ~B*~b)*(~b*~c - ~a*~d))*tan(~e + ~f*~x), ~x), ~x)
end

# line nr: 165
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), 2)*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), -1), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), NeQ(Power(~c, 2) + Power(~d, 2), 0))
  Power(~d, -1)*integrate(((~A*~d*Power(~b, 2) - ~B*~b*(~b*~c - 2 * ~a*~d))*Power(tan(~e + ~f*~x), 2) + ~d*(~B*(Power(~a, 2) - Power(~b, 2)) + 2 * ~A*~a*~b)*tan(~e + ~f*~x) + ~A*~d*Power(~a, 2) - ~B*~c*Power(~b, 2))*Power(~c + ~d*tan(~e + ~f*~x), -1), ~x) + ~B*tan(~e + ~f*~x)*Power(~b, 2)*Power(~d*~f, -1)
end

# line nr: 172
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~n), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), NeQ(Power(~c, 2) + Power(~d, 2), 0), GtQ(~m, 1), Or(IntegerQ(~m), IntegersQ(2 * ~m, 2 * ~n)), Not(And(IGtQ(~n, 1), Or(Not(IntegerQ(~m)), And(EqQ(~c, 0), NeQ(~a, 0))))))
  Power(~d*(~m + ~n), -1)*integrate(Power(~a + ~b*tan(~e + ~f*~x), ~m - 2)*Power(~c + ~d*tan(~e + ~f*~x), ~n)*Simp(~A*~d*(~m + ~n)*Power(~a, 2) + ~d*(~m + ~n)*(~B*(Power(~a, 2) - Power(~b, 2)) + 2 * ~A*~a*~b)*tan(~e + ~f*~x) - (~B*~b*(~m - 1)*(~b*~c - ~a*~d) - ~b*~d*(~m + ~n)*(~A*~b + ~B*~a))*Power(tan(~e + ~f*~x), 2) - ~B*~b*(~b*~c*(~m - 1) + ~a*~d*(1 + ~n)), ~x), ~x) + ~B*~b*Power(~a + ~b*tan(~e + ~f*~x), ~m - 1)*Power(~c + ~d*tan(~e + ~f*~x), 1 + ~n)*Power(~d*~f*(~m + ~n), -1)
end

# line nr: 183
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), NeQ(Power(~c, 2) + Power(~d, 2), 0), LtQ(~m, -1), LtQ(0, ~n, 1), Or(IntegerQ(~m), IntegersQ(2 * ~m, 2 * ~n)))
  Power(~b*(1 + ~m)*(Power(~a, 2) + Power(~b, 2)), -1)*integrate(Power(~a + ~b*tan(~e + ~f*~x), 1 + ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n - 1)*Simp(~A*~b*(~a*~c*(1 + ~m) - ~b*~d*~n) + ~B*~b*(~b*~c*(1 + ~m) + ~a*~d*~n) - ~b*(1 + ~m)*(~A*(~b*~c - ~a*~d) - ~B*(~a*~c + ~b*~d))*tan(~e + ~f*~x) - ~b*~d*(~A*~b - ~B*~a)*(1 + ~m + ~n)*Power(tan(~e + ~f*~x), 2), ~x), ~x) + (~A*~b - ~B*~a)*Power(~a + ~b*tan(~e + ~f*~x), 1 + ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n)*Power(~f*(1 + ~m)*(Power(~a, 2) + Power(~b, 2)), -1)
end

# line nr: 191
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~n), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), NeQ(Power(~c, 2) + Power(~d, 2), 0), LtQ(~m, -1), Or(IntegerQ(~m), IntegersQ(2 * ~m, 2 * ~n)), Not(And(ILtQ(~n, -1), Or(Not(IntegerQ(~m)), And(EqQ(~c, 0), NeQ(~a, 0))))))
  Power((1 + ~m)*(~b*~c - ~a*~d)*(Power(~a, 2) + Power(~b, 2)), -1)*integrate(Power(~a + ~b*tan(~e + ~f*~x), 1 + ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n)*Simp(~A*(~a*(1 + ~m)*(~b*~c - ~a*~d) - ~d*(2 + ~m + ~n)*Power(~b, 2)) + ~B*~b*(~b*~c*(1 + ~m) + ~a*~d*(1 + ~n)) - (1 + ~m)*(~A*~b - ~B*~a)*(~b*~c - ~a*~d)*tan(~e + ~f*~x) - ~b*~d*(~A*~b - ~B*~a)*(2 + ~m + ~n)*Power(tan(~e + ~f*~x), 2), ~x), ~x) + ~b*(~A*~b - ~B*~a)*Power(~a + ~b*tan(~e + ~f*~x), 1 + ~m)*Power(~c + ~d*tan(~e + ~f*~x), 1 + ~n)*Power(~f*(1 + ~m)*(~b*~c - ~a*~d)*(Power(~a, 2) + Power(~b, 2)), -1)
end

# line nr: 202
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), NeQ(Power(~c, 2) + Power(~d, 2), 0), LtQ(0, ~m, 1), LtQ(0, ~n, 1))
  Power(~m + ~n, -1)*integrate(Power(~a + ~b*tan(~e + ~f*~x), ~m - 1)*Power(~c + ~d*tan(~e + ~f*~x), ~n - 1)*Simp((~B*(~a*~d*~m + ~b*~c*~n) + ~A*~b*~d*(~m + ~n))*Power(tan(~e + ~f*~x), 2) + (~m + ~n)*(~A*~b*~c + ~A*~a*~d + ~B*~a*~c - ~B*~b*~d)*tan(~e + ~f*~x) + ~A*~a*~c*(~m + ~n) - ~B*(~a*~d*~n + ~b*~c*~m), ~x), ~x) + ~B*Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n)*Power(~f*(~m + ~n), -1)
end

# line nr: 210
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Pattern(~a, Blank()))*(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank()))), -1), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), NeQ(Power(~c, 2) + Power(~d, 2), 0))
  ~x*(~A*(~a*~c - ~b*~d) + ~B*(~b*~c + ~a*~d))*Power((Power(~a, 2) + Power(~b, 2))*(Power(~c, 2) + Power(~d, 2)), -1) + ~b*(~A*~b - ~B*~a)*integrate((~b - ~a*tan(~e + ~f*~x))*Power(~a + ~b*tan(~e + ~f*~x), -1), ~x)*Power((~b*~c - ~a*~d)*(Power(~a, 2) + Power(~b, 2)), -1) + ~d*(~B*~c - ~A*~d)*Power((~b*~c - ~a*~d)*(Power(~c, 2) + Power(~d, 2)), -1)*integrate((~d - ~c*tan(~e + ~f*~x))*Power(~c + ~d*tan(~e + ~f*~x), -1), ~x)
end

# line nr: 218
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Sqrt(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), -1), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), NeQ(Power(~c, 2) + Power(~d, 2), 0))
  Power(Power(~a, 2) + Power(~b, 2), -1)*integrate(Simp(~A*(~a*~c + ~b*~d) + ~B*(~b*~c - ~a*~d) - (~A*(~b*~c - ~a*~d) - ~B*(~a*~c + ~b*~d))*tan(~e + ~f*~x), ~x)*Power(Sqrt(~c + ~d*tan(~e + ~f*~x)), -1), ~x) - (~B*~a - ~A*~b)*(~b*~c - ~a*~d)*Power(Power(~a, 2) + Power(~b, 2), -1)*integrate((1 + Power(tan(~e + ~f*~x), 2))*Power((~a + ~b*tan(~e + ~f*~x))*Sqrt(~c + ~d*tan(~e + ~f*~x)), -1), ~x)
end

# line nr: 225
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), -1)*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~n), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), NeQ(Power(~c, 2) + Power(~d, 2), 0))
  Power(Power(~a, 2) + Power(~b, 2), -1)*integrate(Power(~c + ~d*tan(~e + ~f*~x), ~n)*Simp(~A*~a + ~B*~b - (~A*~b - ~B*~a)*tan(~e + ~f*~x), ~x), ~x) + ~b*(~A*~b - ~B*~a)*Power(Power(~a, 2) + Power(~b, 2), -1)*integrate((1 + Power(tan(~e + ~f*~x), 2))*Power(~a + ~b*tan(~e + ~f*~x), -1)*Power(~c + ~d*tan(~e + ~f*~x), ~n), ~x)
end

# line nr: 232
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Sqrt(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())))*Power(Sqrt(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank()))), -1), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), NeQ(Power(~c, 2) + Power(~d, 2), 0))
  ~B*~b*integrate((1 + Power(tan(~e + ~f*~x), 2))*Power(Sqrt(~a + ~b*tan(~e + ~f*~x))*Sqrt(~c + ~d*tan(~e + ~f*~x)), -1), ~x) + integrate(Simp(~A*~a + (~A*~b + ~B*~a)*tan(~e + ~f*~x) - ~B*~b, ~x)*Power(Sqrt(~a + ~b*tan(~e + ~f*~x))*Sqrt(~c + ~d*tan(~e + ~f*~x)), -1), ~x)
end

# line nr: 252
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~m, ~n), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), EqQ(Power(~A, 2) + Power(~B, 2), 0))
  Power(~A, 2)*Power(~f, -1)*Subst(integrate(Power(~a + ~b*~x, ~m)*Power(~c + ~d*~x, ~n)*Power(~A - ~B*~x, -1), ~x), ~x, tan(~e + ~f*~x))
end

# line nr: 258
@rule integrate((tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~B, Blank())) + Optional(Pattern(~A, Blank())))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~b, Blank())) + Optional(Pattern(~a, Blank())), Pattern(~m, Blank()))*Power(tan(Optional(Pattern(~f, Blank()))*Pattern(~x, Blank()) + Optional(Pattern(~e, Blank())))*Optional(Pattern(~d, Blank())) + Optional(Pattern(~c, Blank())), Pattern(~n, Blank())), Pattern(~x, Blank(~Symbol))) => if And(FreeQ(List(~a, ~b, ~c, ~d, ~e, ~f, ~A, ~B, ~m, ~n), ~x), NeQ(~b*~c - ~a*~d, 0), NeQ(Power(~a, 2) + Power(~b, 2), 0), NeQ(Power(~A, 2) + Power(~B, 2), 0))
  (~A - ~B*~I)*Power(2, -1)*integrate((1 + ~I*tan(~e + ~f*~x))*Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n), ~x) + (~A + ~B*~I)*Power(2, -1)*integrate((1 - ~I*tan(~e + ~f*~x))*Power(~a + ~b*tan(~e + ~f*~x), ~m)*Power(~c + ~d*tan(~e + ~f*~x), ~n), ~x)
end

